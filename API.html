<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Carousel Demo</title>


    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet/less" type="text/css" href="less/style.less">

    <script src="js/less-1.5.0.min.js"></script>

    <style>
        /* Move down content because we have a fixed navbar that is 50px tall */
        body {
            padding-top: 50px;
            padding-bottom: 20px;
        }

        .xn-pagination {
            margin: 2% 15%;
        }

        .xn-viewport figcaption{
            padding-top: 0px;
        }

        .col-center {
            margin: 0 auto;
            float: none;
        }
        .carousel-pagination, .state {
            padding-top: 15px;
        }
        #output-message {
            display: inline-block;
        }
        .hide {
            display: none;
        }
        .buttonbar .row {
            margin-bottom: 10px;
        }
        ul {
            list-style-type: none;
        }
    </style>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://github.com/nanlabs/xncarousel">xnCarousel</a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="logo"><a href="http://www.nan-labs.com"><img class="logo" src="https://2.gravatar.com/avatar/8c03bfa6a23120303b82a855f371b702?d=https%3A%2F%2Fidenticons.github.com%2F2429fbcab8801d03f7c0b0c75332cef4.png&r=x&s=140"/></a>
                    </li>
                    <li><a href="index.html">Wide</a></li>
                    <li><a href="gallery.html">Gallery</a></li>
                    <li><a href="responsive.html">Responsive</a></li>
                    <li class="active"><a href="#">xnCarousel API</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
        <div class="container">
            <h1>Simple API and Events</h1>
            <p>Get your xnCarousel working in seconds. A really simple <strong>API</strong> and <strong>Events</strong> with the power you need.</p>
            <p class="small">The API allows the client applications to control different aspects of the carousel using Javascript. It could also be used as a JQuery plugin.</p>
            <p class="small">The events allow the carousel to notify the client of important actions, so they can include their own custom logic.</p>
            <p class="small">Click the buttons below to call the different methods of the API. Any important messages as well as event notifications will be displayed below.</p>
        </div>
    </div>

    <div class="container">
        <!-- Example row of columns -->
        <div class="row">
            <div class="col-md-9">
                <div class="row">
                    <div class="col-md-12">
                        <div class="xn-viewport  plugin slide photo-carousel">
                            <div class="xn-left-indicator">
                                <div class="chevron-container">
                                    <div class="chevron left"></div>
                                </div>
                            </div>
                            <div class="xn-right-indicator">
                                <div class="chevron-container">
                                    <div class="chevron right"></div>
                                </div>
                            </div>
                        </div>
                        <div class="xn-pagination">
                            <div class="item-container">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">


                    <div id="apiDemo">
                        <div class="buttonbar">
                            <div class="modifiers hide col-md-12 col-center text-center">
                                <input type="button" class="btn btn-primary" id="btnAddItem" value="Add item"></input>
                                <input type="button" class="btn btn-primary" id="btnRemoveFirst" value="Remove first item"></input>
                                <input type="button" class="btn btn-primary" class="btn btn-primary" id="btnRemoveSelected" value="Remove selected item"></input>
                                <input type="button" class="btn btn-primary" id="btnClear" value="Clear"></input>
                            </div>
                            <div class="carousel-selection col-md-12 col-center text-center">
                                <input type="button" class="btn btn-primary" id="btnSelect" value="Select 2nd item"></input>
                                <input type="button" class="btn btn-primary" id="btnClearSelect" value="Clear Selection"></input>
                            </div>
                            <div class="carousel-pagination col-md-12 col-center text-center">
                                <input type="button" class="btn btn-primary" id="btnBack" value="Go Back"></input>
                                <input type="button" class="btn btn-primary" id="btnNext" value="Go Next"></input>
                                <input type="button" class="btn btn-primary" id="btnFirst" value="Go to First"></input>
                                <input type="button" class="btn btn-primary" id="btnLast" value="Go to Last"></input>
                                <input type="button" class="btn btn-primary" id="btnGotoPage" value="Go to 2nd Page"></input>
                            </div>
                            <div class="state row col-md-12 col-center text-center">
                                <div class="row">
                                    <input type="button" class="btn btn-primary" id="btnGetItemCount" value="Get Item Count"></input>
                                    <input type="button" class="btn btn-primary" id="btnGetPageCount" value="Get Page Count"></input>
                                    <input type="button" class="btn btn-primary" id="btnGetSelectedIndex" value="Get Selected Index"></input>
                                </div>
                                <div class="row">
                                    <input type="button" class="btn btn-primary" id="btnGetItemsForPage" value="Get Items For 2nd Page"></input>
                                    <input type="button" class="btn btn-primary" id="btnGetCurrentPage" value="Get Current Page Index"></input>
                                    <input type="button" class="btn btn-primary" id="btnGetLastItem" value="Get Last Item"></input>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="row">
                    <p class="row">
                        Last Message:
                    </p>
                    <div class="alert alert-warning row col-md-12" id="output-message"></div>
                </div>
                <div class="row">
                    <p class="row">
                        Events:
                    </p>
                    <div class="alert alert-success row col-md-12" id="output-events">
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <footer class="col-md-12">
                <p>&copy; X-Team / NaN Labs 2013</p>
            </footer>
        </div>
    </div>
    <!-- /container -->


    <!-- Bootstrap core JavaScript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script src="./bower_components/xnCarousel/dist/jquery.xnCarousel.js"></script>
    <script type="text/javascript">

        var buildImageUrl = function(item, size) {
            var src = item.src.replace('[resolution]',size);
            var delay = item.delay || 0;
            return "http://deelay.me/" + delay + "/" + src; 
        };


        var itemTemplate = function(item) {
            var itemTemplate = '<span class="thumbnail-wrapper">';
            itemTemplate += '<figure>';
            itemTemplate += '<img class="thumbnail" src="' + buildImageUrl(item,'600x450') + '"/>';
            itemTemplate += '<figcaption>' + item.title + '</figcaption>';
            itemTemplate += '</figure>';
            itemTemplate += '</span>';
            return itemTemplate;
        };

        $(function() {
            var carousel = $(".xn-viewport.photo-carousel").xnCarousel({
                touchEnabled: true,
                breakpointsConfiguration : { 
                    "*..430" : {pageSize : 1},
                    "431..768" : {pageSize : 2},
                    "769..*" : {pageSize : 3}
                },
                pagingIndicators: true,
                animationType: 'slide',
                moveSpeed: 500,
                avoidLeftRightMargins: true,
                itemTemplate: itemTemplate,
                api: true,
                resonsive:true,
                paginationContainerSelector: 'div.xn-pagination .item-container'
            });

            // Modification API

            function notify(text) {
                $("#output-message").removeClass('hide');
                $("#output-message").html("<i>" + text + "</i><br>");
            }

            $("#btnAddItem").click(function(e) {
                var total = carousel.getItemCount();
                carousel.addItem({
                    "id": total,
                    "name": "Item " + total,
                    "thumbnailURL": buildImageUrl(),
                    "airdate": "2013-09-22",
                    "expirationDays": 5 + total
                });

                notify("Item Added");
            });

            $("#btnRemoveFirst").click(function(e) {
                carousel.removeItem(0);
                notify("Item 0 removed");
            });

            $("#btnRemoveSelected").click(function(e) {
                carousel.removeItem(carousel.getSelectedIndex());
                notify("Selected Item Removed");
            });

            $("#btnClear").click(function(e) {
                carousel.clear();
                notify("Cleared");
            });

            $("#btnSelect").click(function(e) {
                carousel.selectItem(1);
                notify("Second Item selected");
            });

            $("#btnClearSelect").click(function(e) {
                carousel.clearSelection();
                notify("Selection Removed");
            });

            // Pagination API

            $("#btnBack").click(function(e) {
                carousel.goBack();
                notify("Navigated to previous page");
            });

            $("#btnNext").click(function(e) {
                carousel.goNext();
                notify("Navigated to next page");
            });

            $("#btnFirst").click(function(e) {
                carousel.goToFirstPage();
                notify("Navigated to first page");
            });

            $("#btnLast").click(function(e) {
                carousel.goToLastPage();
                notify("Navigated to last page");
            });

            $("#btnGotoPage").click(function(e) {
                carousel.goToPage(1);
                notify("Navigated to 2nd page");
            });


            // Information API

            function display(text, value) {
                $("#output-message").removeClass('hide');
                $("#output-message").html("<i>" + text + "</i>: <strong>" + value + "</strong><br>");
            }

            $("#btnGetItemCount").click(function(e) {
                display('Item Count', carousel.getItemCount());
            });

            $("#btnGetPageCount").click(function(e) {
                display('Page Count', carousel.getPageCount());
            });

            $("#btnGetSelectedIndex").click(function(e) {
                display('Selected Index', carousel.getSelectedIndex());
            });

            $("#btnGetItemsForPage").click(function(e) {
                display('Item indices for 2nd page', carousel.getItemIndicesForPage(1));
            });

            $("#btnGetCurrentPage").click(function(e) {
                display('Current Page Index', carousel.getCurrentPage());
            });

            $("#btnGetLastItem").click(function(e) {
                display('Last Item Index', carousel.getLastItemIndex());
            });

            var eventMessageIndex = 1;

            function displayEvent(text) {
                var $eventContainer = $("#output-events");
                var $eventMessages = $eventContainer.children(".event-item");
                if ($eventMessages.length > 10) $eventMessages.first().remove();
                $("#output-events").append("<div class='event-item'>" + (eventMessageIndex++) + ". " + text + "</div>");
            }

            // Events
            /*carousel.on('carousel:initialized', function() {
            displayEvent("Carousel Initialized");
        });*/
            carousel.on('carousel:pageChangeStart', function(e, from, to) {
                displayEvent("Page Change Started: " + from + " -> " + to);
            });
            /* carousel.on('carousel:pageChanged', function(e) {
            displayEvent("Page Change Done before animation: new Page " + e[0]);
        });*/
            carousel.on('carousel:itemsCleared', function() {
                displayEvent("Cleared");
            });
            carousel.on('carousel:itemRemoved', function() {
                displayEvent("Item removed");
            });
            carousel.on('carousel:itemSelected', function(e, index) {
                displayEvent("Item Selected: " + index);
            });
            carousel.on('carousel:selectionClear', function(e) {
                displayEvent("Selection Cleared");
            });
            carousel.on('carousel:itemAdded', function(e, item) {
                displayEvent("Item Added: " + JSON.stringify(item));
            });
            carousel.on('carousel:rendered', function(e) {
                displayEvent("Carousel Rendered");
            });
            carousel.on('carousel:pageChangeEnded', function(e, from, to) {
                displayEvent("Page Change Complete: " + from + " -> " + to);
            });

            $.getJSON('js/natgeo.json', function(data) {
                carousel.render(data.results);
            });

        });
    </script>




</body>

</html>